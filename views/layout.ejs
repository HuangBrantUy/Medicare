<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/login.css">
    <link rel="stylesheet" href="/css/bootstrap/bootstrap.css">
</head>

<body>
<%- body %>

<script src="/js/jquery-3.5.1.js"></script>
<script src="/js/popper.js"></script>
<script src="/js/bootstrap.js"></script>
<script>
        const form = document.querySelector('form');
        const emailError = document.querySelector('.email.error');
        const passwordError = document.querySelector('.password.error');

        form.addEventListener('submit', async (e) => {
            e.preventDefault();

            //get the values
            const email = form.email.value;
            const password = form.password.value;

            //reset values

            emailError.textContent = '';
            passwordError.textContent = '';

            try {
                const res = await fetch('/login', {
                    method: 'POST',
                    body: JSON.stringify({ email, password }),
                    headers: { 'Content-Type': 'application/JSON' }
                });
                const data = await res.json();
                console.log(data)
                if (data.errors) {
                    emailError.textContent = data.errors.email;
                    passwordError.textContent = data.errors.password
                }
                if (data.user) {
                    location.assign('/');
                }
            } catch (err) {
                // console.log(err);
            }

        });
</script>
<script>
    const form = document.querySelector('form');
    const emailError = document.querySelector('.email.error');
    const passwordError = document.querySelector('.password.error');

    form.addEventListener('submit', async (e) => {
        e.preventDefault();

        //get the values
        const email = form.email.value;
        const password = form.password.value;

        //reset values

        emailError.textContent = '';
        passwordError.textContent = '';

        try {
            const res = await fetch('/signup', {
                method: 'POST',
                body: JSON.stringify({ email, password }),
                headers: { 'Content-Type': 'application/JSON' }
            });
            const data = await res.json();
            console.log(data)
            if (data.errors) {
                emailError.textContent = data.errors.email;
                passwordError.textContent = data.errors.password
            }
            if (data.user) {
                location.assign('/');
            }
        } catch (err) {

        }

    });
</script>
</body>

</html>